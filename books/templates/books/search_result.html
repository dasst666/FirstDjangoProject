<form method="get">
    <input type="text" name="q" placeholder="Найти книгу...">
    <button type="submit">Поиск</button>
  </form>
  
  <h2>Результаты поиска для "{{ query }}"</h2>

  {% if local_results %}
    <h3>Найдено в библиотеке:</h3>
    <ul>
      {% for book in local_results %}
        <li>{{ book.title }} — {{ book.author }}</li>
      {% endfor %}
    </ul>
  {% elif external_results %}
    <h3>Найдено во внешнем источнике:</h3>
    <ul>
      {% for book in external_results %}
        <li>
          <strong>{{ book.title }}</strong><br>
          Автор: {{ book.author }}<br>
          {{ book.description|truncatechars:200 }}
          <form method="post" action="{% url 'import-book' %}">
            {% csrf_token %}
            <input type="hidden" name="title" value="{{ book.title }}">
            <input type="hidden" name="author" value="{{ book.author }}">
            <input type="hidden" name="summary" value="{{ book.description }}">
            <button type="submit">Добавить в библиотеку</button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Ничего не найдено.</p>
  {% endif %}
  
  